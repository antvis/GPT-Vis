import { render } from '../src';
import './utils/matcher';

describe('SSR render', () => {
  it('word-cloud', async () => {
    const vis = await render({
      width: 600,
      height: 400,
      type: 'word-cloud',
      data: [
        { value: 11.3865516372, text: '物质' },
        { value: 7.75434839431, text: '万物' },
        { value: 9.29550746599, text: '感官' },
        { value: 6.89126871927, text: '事物' },
        { value: 11.739204307083542, text: '会变' },
        { value: 9.29550746599, text: '感官' },
        { value: 8.70772080109, text: '认知' },
        { value: 13.68728134056, text: '元素' },
        { value: 8.29487558568, text: '世间' },
        { value: 8.77077893705, text: '肉眼' },
        { value: 8.10461990121, text: '大自然' },
        { value: 7.69410172525, text: '粒子' },
        { value: 7.65457088649, text: '分割' },
        { value: 21.6192703972, text: '积木' },
        { value: 10.7226238216, text: '永恒不变' },
        { value: 7.14957618304, text: '原子' },
        { value: 7.95787827685, text: '尺度' },
        { value: 7.36109169636, text: '衡量' },
        { value: 11.7034530746, text: '明辨是非' },
        { value: 9.14102377386, text: '存在' },
        { value: 6.90950076485, text: '理性' },
        { value: 12.06102341102, text: '模式' },
        { value: 11.739204307083542, text: '理型' },
        { value: 11.3865516372, text: '物质' },
        { value: 9.54656840164, text: '东西' },
        { value: 8.73505881114, text: '世界' },
        { value: 34.45634359635, text: '事物' },
        { value: 27.886522397969998, text: '感官' },
        { value: 6.47412857958, text: '痛苦' },
        { value: 6.06866347147, text: '避免' },
        { value: 5.02315619812, text: '形式' },
        { value: 4.80149232937, text: '方式' },
        { value: 21.209681572, text: '万事万物' },
        { value: 7.48068272383, text: '上帝' },
        { value: 7.37711534583, text: '一体' },
        { value: 7.36834335975, text: '宇宙' },
        { value: 9.17328983326, text: '赦免' },
        { value: 8.04274449749, text: '拯救' },
        { value: 7.48068272383, text: '上帝' },
        { value: 14.96136544766, text: '上帝' },
        { value: 7.95787827685, text: '世人' },
        { value: 14.96136544766, text: '上帝' },
        { value: 11.67082488616, text: '创造' },
        { value: 9.80633308975, text: '虚空' },
        { value: 8.73505881114, text: '世界' },
        { value: 16.57509909118, text: '启示' },
        { value: 14.51638170122, text: '信仰' },
        { value: 13.8190015297, text: '理性' },
        { value: 10.5684731418, text: '观感' },
        { value: 12.57964972316, text: '地球' },
        { value: 12.45583951066, text: '太阳' },
        { value: 11.39201164604, text: '运行' },
        { value: 14.35128801962, text: '物体' },
        { value: 11.18052531558, text: '状态' },
        { value: 10.0505300503, text: '轴心' },
        { value: 9.56994431169, text: '星球' },
        { value: 9.29550746599, text: '感官' },
        { value: 21.52693202943, text: '物体' },
        { value: 7.36834335975, text: '宇宙' },
        { value: 22.44204817149, text: '上帝' },
        { value: 12.1089181827, text: '主宰世界' },
        { value: 10.8096351986, text: '牵线' },
        { value: 10.6818018271, text: '自然法则' },
        { value: 18.59101493198, text: '感官' },
        { value: 15.51728049278, text: '心灵' },
        { value: 10.1394775363, text: '任何事物' },
        { value: 14.95161725614, text: '哲学家' },
        { value: 13.78796485028, text: '感受' },
        { value: 10.3743171274, text: '天主' },
        { value: 10.2117981979, text: '质料' },
        { value: 9.14102377386, text: '存在' },
        { value: 14.96136544766, text: '上帝' },
        { value: 14.35850390238, text: '头顶' },
        { value: 12.5143832909, text: '因果律' },
        { value: 11.0674643079, text: '根植' },
        { value: 16.20923980242, text: '大自然' },
        { value: 13.10258821671, text: '世界' },
        { value: 11.3865516372, text: '物质' },
        { value: 10.1164880181, text: '无休止' },
        { value: 13.10258821671, text: '世界' },
        { value: 11.23942650284, text: '精神' },
        { value: 10.1394775363, text: '脚踏实地' },
        { value: 26.6063055869, text: '阶段' },
        { value: 13.0408437271, text: '真实' },
        { value: 10.48883682488, text: '是否' },
        { value: 17.0798274558, text: '物质' },
        { value: 11.739204307083542, text: '新的' },
        { value: 11.23942650284, text: '精神' },
        { value: 10.4471578861, text: '改变' },
        { value: 10.21443458184, text: '造成' },
        { value: 16.20923980242, text: '一艘' },
        { value: 15.07529909688, text: '航行' },
        { value: 11.739204307083542, text: '人则' },
        { value: 11.7034530746, text: '物竞天择' },
        { value: 10.5684731418, text: '适者生存' },
        { value: 19.89886786678, text: '潜意识' },
        { value: 12.76848869812, text: '意识' },
      ],
    });

    expect(vis.toBuffer()).toImageEqual('__tests__/snapshot', 'word-cloud', {
      maxError: Infinity,
    });
  });

  it('word-cloud-rough', async () => {
    const vis = await render({
      width: 600,
      height: 400,
      type: 'word-cloud',
      texture: 'rough',
      data: [
        { value: 11.3865516372, text: 'substance' },
        { value: 7.75434839431, text: 'everything' },
        { value: 9.29550746599, text: 'sense' },
        { value: 6.89126871927, text: 'thing' },
        { value: 11.739204307083542, text: 'change' },
        { value: 9.29550746599, text: 'sense' },
        { value: 8.70772080109, text: 'cognition' },
        { value: 13.68728134056, text: 'element' },
        { value: 8.29487558568, text: 'world' },
        { value: 8.77077893705, text: 'eye' },
        { value: 8.10461990121, text: 'nature' },
        { value: 7.69410172525, text: 'particle' },
        { value: 7.65457088649, text: 'split' },
        { value: 21.6192703972, text: 'block' },
        { value: 10.7226238216, text: 'eternal' },
        { value: 7.14957618304, text: 'atom' },
        { value: 7.95787827685, text: 'scale' },
        { value: 7.36109169636, text: 'measure' },
        { value: 11.7034530746, text: 'distinguish' },
        { value: 9.14102377386, text: 'existence' },
        { value: 6.90950076485, text: 'rational' },
        { value: 12.06102341102, text: 'pattern' },
        { value: 11.739204307083542, text: 'ideal' },
        { value: 11.3865516372, text: 'substance' },
        { value: 9.54656840164, text: 'thing' },
        { value: 8.73505881114, text: 'world' },
        { value: 34.45634359635, text: 'thing' },
        { value: 27.886522397969998, text: 'sense' },
        { value: 6.47412857958, text: 'pain' },
        { value: 6.06866347147, text: 'avoid' },
        { value: 5.02315619812, text: 'form' },
        { value: 4.80149232937, text: 'way' },
        { value: 21.209681572, text: 'everything' },
        { value: 7.48068272383, text: 'god' },
        { value: 7.37711534583, text: 'oneness' },
        { value: 7.36834335975, text: 'universe' },
        { value: 9.17328983326, text: 'forgiveness' },
        { value: 8.04274449749, text: 'salvation' },
        { value: 7.48068272383, text: 'god' },
        { value: 14.96136544766, text: 'god' },
        { value: 7.95787827685, text: 'world' },
        { value: 14.96136544766, text: 'god' },
        { value: 11.67082488616, text: 'creation' },
        { value: 9.80633308975, text: 'void' },
        { value: 8.73505881114, text: 'world' },
        { value: 16.57509909118, text: 'revelation' },
        { value: 14.51638170122, text: 'faith' },
        { value: 13.8190015297, text: 'rational' },
        { value: 10.5684731418, text: 'sense' },
        { value: 12.57964972316, text: 'earth' },
        { value: 12.45583951066, text: 'sun' },
        { value: 11.39201164604, text: 'running' },
        { value: 14.35128801962, text: 'object' },
        { value: 11.18052531558, text: 'state' },
        { value: 10.0505300503, text: 'axis' },
        { value: 9.56994431169, text: 'planet' },
        { value: 9.29550746599, text: 'sense' },
        { value: 21.52693202943, text: 'object' },
        { value: 7.36834335975, text: 'universe' },
        { value: 22.44204817149, text: 'god' },
        { value: 12.1089181827, text: 'world' },
        { value: 10.8096351986, text: 'thread' },
        { value: 10.6818018271, text: 'natural law' },
        { value: 18.59101493198, text: 'sense' },
        { value: 15.51728049278, text: 'mind' },
        { value: 10.1394775363, text: 'anything' },
        { value: 14.95161725614, text: 'philosopher' },
        { value: 13.78796485028, text: 'feeling' },
        { value: 10.3743171274, text: 'god' },
        { value: 10.2117981979, text: 'matter' },
        { value: 9.14102377386, text: 'existence' },
        { value: 14.96136544766, text: 'god' },
        { value: 14.35850390238, text: 'head' },
        { value: 12.5143832909, text: 'law' },
        { value: 11.0674643079, text: 'root' },
        { value: 16.20923980242, text: 'nature' },
        { value: 13.10258821671, text: 'world' },
        { value: 11.3865516372, text: 'substance' },
        { value: 10.1164880181, text: 'endless' },
        { value: 13.10258821671, text: 'world' },
        { value: 11.23942650284, text: 'spirit' },
        { value: 10.1394775363, text: 'ground' },
        { value: 26.6063055869, text: 'stage' },
        { value: 13.0408437271, text: 'truth' },
        { value: 10.48883682488, text: 'whether' },
        { value: 17.0798274558, text: 'substance' },
        { value: 11.739204307083542, text: 'new' },
        { value: 11.23942650284, text: 'spirit' },
        { value: 10.4471578861, text: 'change' },
        { value: 10.21443458184, text: 'cause' },
        { value: 16.20923980242, text: 'a ship' },
        { value: 15.07529909688, text: 'sail' },
        { value: 11.739204307083542, text: 'man' },
        { value: 11.7034530746, text: 'survival of the fittest' },
        { value: 10.5684731418, text: 'survival of the fittest' },
        { value: 19.89886786678, text: 'subconscious' },
        { value: 12.76848869812, text: 'consciousness' },
      ],
    });

    expect(vis.toBuffer()).toImageEqual('__tests__/snapshot', 'word-cloud-rough', {
      maxError: Infinity,
    });
  });

  it('word-cloud-required', async () => {
    const vis = await render({
      type: 'word-cloud',
      data: [
        { value: 11.3865516372, text: '物质' },
        { value: 7.75434839431, text: '万物' },
        { value: 9.29550746599, text: '感官' },
        { value: 6.89126871927, text: '事物' },
        { value: 11.739204307083542, text: '会变' },
        { value: 9.29550746599, text: '感官' },
        { value: 8.70772080109, text: '认知' },
        { value: 13.68728134056, text: '元素' },
        { value: 8.29487558568, text: '世间' },
        { value: 8.77077893705, text: '肉眼' },
        { value: 8.10461990121, text: '大自然' },
        { value: 7.69410172525, text: '粒子' },
        { value: 7.65457088649, text: '分割' },
        { value: 21.6192703972, text: '积木' },
        { value: 10.7226238216, text: '永恒不变' },
        { value: 7.14957618304, text: '原子' },
        { value: 7.95787827685, text: '尺度' },
        { value: 7.36109169636, text: '衡量' },
        { value: 11.7034530746, text: '明辨是非' },
        { value: 9.14102377386, text: '存在' },
        { value: 6.90950076485, text: '理性' },
        { value: 12.06102341102, text: '模式' },
        { value: 11.739204307083542, text: '理型' },
        { value: 11.3865516372, text: '物质' },
        { value: 9.54656840164, text: '东西' },
        { value: 8.73505881114, text: '世界' },
        { value: 34.45634359635, text: '事物' },
        { value: 27.886522397969998, text: '感官' },
        { value: 6.47412857958, text: '痛苦' },
        { value: 6.06866347147, text: '避免' },
        { value: 5.02315619812, text: '形式' },
        { value: 4.80149232937, text: '方式' },
        { value: 21.209681572, text: '万事万物' },
        { value: 7.48068272383, text: '上帝' },
        { value: 7.37711534583, text: '一体' },
        { value: 7.36834335975, text: '宇宙' },
        { value: 9.17328983326, text: '赦免' },
        { value: 8.04274449749, text: '拯救' },
        { value: 7.48068272383, text: '上帝' },
        { value: 14.96136544766, text: '上帝' },
        { value: 7.95787827685, text: '世人' },
        { value: 14.96136544766, text: '上帝' },
        { value: 11.67082488616, text: '创造' },
        { value: 9.80633308975, text: '虚空' },
        { value: 8.73505881114, text: '世界' },
        { value: 16.57509909118, text: '启示' },
        { value: 14.51638170122, text: '信仰' },
        { value: 13.8190015297, text: '理性' },
        { value: 10.5684731418, text: '观感' },
        { value: 12.57964972316, text: '地球' },
        { value: 12.45583951066, text: '太阳' },
        { value: 11.39201164604, text: '运行' },
        { value: 14.35128801962, text: '物体' },
        { value: 11.18052531558, text: '状态' },
        { value: 10.0505300503, text: '轴心' },
        { value: 9.56994431169, text: '星球' },
        { value: 9.29550746599, text: '感官' },
        { value: 21.52693202943, text: '物体' },
        { value: 7.36834335975, text: '宇宙' },
        { value: 22.44204817149, text: '上帝' },
        { value: 12.1089181827, text: '主宰世界' },
        { value: 10.8096351986, text: '牵线' },
        { value: 10.6818018271, text: '自然法则' },
        { value: 18.59101493198, text: '感官' },
        { value: 15.51728049278, text: '心灵' },
        { value: 10.1394775363, text: '任何事物' },
        { value: 14.95161725614, text: '哲学家' },
        { value: 13.78796485028, text: '感受' },
        { value: 10.3743171274, text: '天主' },
        { value: 10.2117981979, text: '质料' },
        { value: 9.14102377386, text: '存在' },
        { value: 14.96136544766, text: '上帝' },
        { value: 14.35850390238, text: '头顶' },
        { value: 12.5143832909, text: '因果律' },
        { value: 11.0674643079, text: '根植' },
        { value: 16.20923980242, text: '大自然' },
        { value: 13.10258821671, text: '世界' },
        { value: 11.3865516372, text: '物质' },
        { value: 10.1164880181, text: '无休止' },
        { value: 13.10258821671, text: '世界' },
        { value: 11.23942650284, text: '精神' },
        { value: 10.1394775363, text: '脚踏实地' },
        { value: 26.6063055869, text: '阶段' },
        { value: 13.0408437271, text: '真实' },
        { value: 10.48883682488, text: '是否' },
        { value: 17.0798274558, text: '物质' },
        { value: 11.739204307083542, text: '新的' },
        { value: 11.23942650284, text: '精神' },
        { value: 10.4471578861, text: '改变' },
        { value: 10.21443458184, text: '造成' },
        { value: 16.20923980242, text: '一艘' },
        { value: 15.07529909688, text: '航行' },
        { value: 11.739204307083542, text: '人则' },
        { value: 11.7034530746, text: '物竞天择' },
        { value: 10.5684731418, text: '适者生存' },
        { value: 19.89886786678, text: '潜意识' },
        { value: 12.76848869812, text: '意识' },
      ],
    });

    expect(vis.toBuffer()).toImageEqual('__tests__/snapshot', 'word-cloud-required', {
      maxError: Infinity,
    });
  });

  it('word-cloud-academy', async () => {
    const vis = await render({
      width: 600,
      height: 400,
      type: 'word-cloud',
      theme: 'academy',
      data: [
        { value: 11.3865516372, text: '物质' },
        { value: 7.75434839431, text: '万物' },
        { value: 9.29550746599, text: '感官' },
        { value: 6.89126871927, text: '事物' },
        { value: 11.739204307083542, text: '会变' },
        { value: 9.29550746599, text: '感官' },
        { value: 8.70772080109, text: '认知' },
        { value: 13.68728134056, text: '元素' },
        { value: 8.29487558568, text: '世间' },
        { value: 8.77077893705, text: '肉眼' },
        { value: 8.10461990121, text: '大自然' },
        { value: 7.69410172525, text: '粒子' },
        { value: 7.65457088649, text: '分割' },
        { value: 21.6192703972, text: '积木' },
        { value: 10.7226238216, text: '永恒不变' },
        { value: 7.14957618304, text: '原子' },
        { value: 7.95787827685, text: '尺度' },
        { value: 7.36109169636, text: '衡量' },
        { value: 11.7034530746, text: '明辨是非' },
        { value: 9.14102377386, text: '存在' },
        { value: 6.90950076485, text: '理性' },
        { value: 12.06102341102, text: '模式' },
        { value: 11.739204307083542, text: '理型' },
        { value: 11.3865516372, text: '物质' },
        { value: 9.54656840164, text: '东西' },
        { value: 8.73505881114, text: '世界' },
        { value: 34.45634359635, text: '事物' },
        { value: 27.886522397969998, text: '感官' },
        { value: 6.47412857958, text: '痛苦' },
        { value: 6.06866347147, text: '避免' },
        { value: 5.02315619812, text: '形式' },
        { value: 4.80149232937, text: '方式' },
        { value: 21.209681572, text: '万事万物' },
        { value: 7.48068272383, text: '上帝' },
        { value: 7.37711534583, text: '一体' },
        { value: 7.36834335975, text: '宇宙' },
        { value: 9.17328983326, text: '赦免' },
        { value: 8.04274449749, text: '拯救' },
        { value: 7.48068272383, text: '上帝' },
        { value: 14.96136544766, text: '上帝' },
        { value: 7.95787827685, text: '世人' },
        { value: 14.96136544766, text: '上帝' },
        { value: 11.67082488616, text: '创造' },
        { value: 9.80633308975, text: '虚空' },
        { value: 8.73505881114, text: '世界' },
        { value: 16.57509909118, text: '启示' },
        { value: 14.51638170122, text: '信仰' },
        { value: 13.8190015297, text: '理性' },
        { value: 10.5684731418, text: '观感' },
        { value: 12.57964972316, text: '地球' },
        { value: 12.45583951066, text: '太阳' },
        { value: 11.39201164604, text: '运行' },
        { value: 14.35128801962, text: '物体' },
        { value: 11.18052531558, text: '状态' },
        { value: 10.0505300503, text: '轴心' },
        { value: 9.56994431169, text: '星球' },
        { value: 9.29550746599, text: '感官' },
        { value: 21.52693202943, text: '物体' },
        { value: 7.36834335975, text: '宇宙' },
        { value: 22.44204817149, text: '上帝' },
        { value: 12.1089181827, text: '主宰世界' },
        { value: 10.8096351986, text: '牵线' },
        { value: 10.6818018271, text: '自然法则' },
        { value: 18.59101493198, text: '感官' },
        { value: 15.51728049278, text: '心灵' },
        { value: 10.1394775363, text: '任何事物' },
        { value: 14.95161725614, text: '哲学家' },
        { value: 13.78796485028, text: '感受' },
        { value: 10.3743171274, text: '天主' },
        { value: 10.2117981979, text: '质料' },
        { value: 9.14102377386, text: '存在' },
        { value: 14.96136544766, text: '上帝' },
        { value: 14.35850390238, text: '头顶' },
        { value: 12.5143832909, text: '因果律' },
        { value: 11.0674643079, text: '根植' },
        { value: 16.20923980242, text: '大自然' },
        { value: 13.10258821671, text: '世界' },
        { value: 11.3865516372, text: '物质' },
        { value: 10.1164880181, text: '无休止' },
        { value: 13.10258821671, text: '世界' },
        { value: 11.23942650284, text: '精神' },
        { value: 10.1394775363, text: '脚踏实地' },
        { value: 26.6063055869, text: '阶段' },
        { value: 13.0408437271, text: '真实' },
        { value: 10.48883682488, text: '是否' },
        { value: 17.0798274558, text: '物质' },
        { value: 11.739204307083542, text: '新的' },
        { value: 11.23942650284, text: '精神' },
        { value: 10.4471578861, text: '改变' },
        { value: 10.21443458184, text: '造成' },
        { value: 16.20923980242, text: '一艘' },
        { value: 15.07529909688, text: '航行' },
        { value: 11.739204307083542, text: '人则' },
        { value: 11.7034530746, text: '物竞天择' },
        { value: 10.5684731418, text: '适者生存' },
        { value: 19.89886786678, text: '潜意识' },
        { value: 12.76848869812, text: '意识' },
      ],
    });

    expect(vis.toBuffer()).toImageEqual('__tests__/snapshot', 'word-cloud-academy', {
      maxError: Infinity,
    });
  });
});
